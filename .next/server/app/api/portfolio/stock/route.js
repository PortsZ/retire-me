"use strict";(()=>{var e={};e.id=908,e.ids=[908],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},73837:e=>{e.exports=require("util")},53062:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>k,patchFetch:()=>m,requestAsyncStorage:()=>f,routeModule:()=>d,serverHooks:()=>w,staticGenerationAsyncStorage:()=>c});var r={};o.r(r),o.d(r,{DELETE:()=>l,POST:()=>p,PUT:()=>u});var i=o(49303),s=o(88716),n=o(60670),a=o(37903);async function p(e){let{userId:t,symbol:o,quantity:r}=await e.json(),i=await a._.user.findUnique({where:{id:t},include:{portfolio:!0}});return i&&i.portfolio?new Response(JSON.stringify(await a._.stock.create({data:{symbol:o,quantity:r,portfolioId:i.portfolio.id}}))):new Response(JSON.stringify({error:"User or portfolio not found"}),{status:404})}async function u(e){let{userId:t,symbol:o,quantity:r}=await e.json(),i=await a._.user.findUnique({where:{id:t},include:{portfolio:{include:{stocks:!0}}}});if(!i||!i.portfolio)return new Response(JSON.stringify({error:"User or portfolio not found"}),{status:404});{let e=i.portfolio.stocks.find(e=>e.symbol===o);return e?new Response(JSON.stringify(await a._.stock.update({where:{id:e.id},data:{quantity:r}}))):new Response(JSON.stringify({error:"Stock not found"}),{status:404})}}async function l(e){let{userId:t,symbol:o}=await e.json();console.log(t,o);let r=await a._.user.findUnique({where:{id:t},include:{portfolio:{include:{stocks:!0}}}});if(!r||!r.portfolio)return new Response(JSON.stringify({error:"User or portfolio not found"}),{status:404});{let e=r.portfolio.stocks.find(e=>e.symbol===o);return e?new Response(JSON.stringify(await a._.stock.delete({where:{id:e.id}}))):new Response(JSON.stringify({error:"Stock not found"}),{status:404})}}let d=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/portfolio/stock/route",pathname:"/api/portfolio/stock",filename:"route",bundlePath:"app/api/portfolio/stock/route"},resolvedPagePath:"/home/portsz/projects/portsz/finapp/retire-me/src/app/api/portfolio/stock/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:f,staticGenerationAsyncStorage:c,serverHooks:w}=d,k="/api/portfolio/stock/route";function m(){return(0,n.patchFetch)({serverHooks:w,staticGenerationAsyncStorage:c})}},37903:(e,t,o)=>{o.d(t,{_:()=>a});var r=o(53524),i=o(83888);let s=(0,require("@libsql/client").createClient)({url:"libsql://retire-me-portsz.turso.io",authToken:process.env.TURSO_AUTH_TOKEN}),n=new i.B(s),a=new r.PrismaClient({adapter:n})}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[948,65],()=>o(53062));module.exports=r})();