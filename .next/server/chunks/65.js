"use strict";exports.id=65,exports.ids=[65],exports.modules={11415:(e,t,r)=>{var n,i,s,a,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,h=(e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})},f={};h(f,{Debug:()=>J,clearLogs:()=>X,default:()=>K,getLogs:()=>z}),e.exports=((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of u(t))c.call(e,i)||i===r||o(e,i,{get:()=>t[i],enumerable:!(n=l(t,i))||n.enumerable});return e})(o({},"__esModule",{value:!0}),f);var p={};h(p,{$:()=>m,bgBlack:()=>C,bgBlue:()=>G,bgCyan:()=>P,bgGreen:()=>S,bgMagenta:()=>$,bgRed:()=>L,bgWhite:()=>M,bgYellow:()=>j,black:()=>O,blue:()=>N,bold:()=>w,cyan:()=>R,dim:()=>b,gray:()=>A,green:()=>D,grey:()=>q,hidden:()=>T,inverse:()=>E,italic:()=>_,magenta:()=>k,red:()=>x,reset:()=>y,strikethrough:()=>I,underline:()=>v,white:()=>U,yellow:()=>B});var d=!0;"undefined"!=typeof process&&({FORCE_COLOR:n,NODE_DISABLE_COLORS:i,NO_COLOR:s,TERM:a}=process.env||{},d=process.stdout&&process.stdout.isTTY);var m={enabled:!i&&null==s&&"dumb"!==a&&(null!=n&&"0"!==n||d)};function g(e,t){let r=RegExp(`\\x1b\\[${t}m`,"g"),n=`\x1b[${e}m`,i=`\x1b[${t}m`;return function(e){return m.enabled&&null!=e?n+(~(""+e).indexOf(i)?e.replace(r,i+n):e)+i:e}}var y=g(0,0),w=g(1,22),b=g(2,22),_=g(3,23),v=g(4,24),E=g(7,27),T=g(8,28),I=g(9,29),O=g(30,39),x=g(31,39),D=g(32,39),B=g(33,39),N=g(34,39),k=g(35,39),R=g(36,39),U=g(37,39),A=g(90,39),q=g(90,39),C=g(40,49),L=g(41,49),S=g(42,49),j=g(43,49),G=g(44,49),$=g(45,49),P=g(46,49),M=g(47,49),W=["green","yellow","blue","magenta","cyan","red"],F=[],H=Date.now(),V=0,Q="undefined"!=typeof process?process.env:{};globalThis.DEBUG??(globalThis.DEBUG=Q.DEBUG??""),globalThis.DEBUG_COLORS??(globalThis.DEBUG_COLORS=!Q.DEBUG_COLORS||"true"===Q.DEBUG_COLORS);var Y={enable(e){"string"==typeof e&&(globalThis.DEBUG=e)},disable(){let e=globalThis.DEBUG;return globalThis.DEBUG="",e},enabled(e){let t=globalThis.DEBUG.split(",").map(e=>e.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),r=t.some(t=>""!==t&&"-"!==t[0]&&e.match(RegExp(t.split("*").join(".*")+"$"))),n=t.some(t=>""!==t&&"-"===t[0]&&e.match(RegExp(t.slice(1).split("*").join(".*")+"$")));return r&&!n},log:(...e)=>{let t;let[n,i,...s]=e;"undefined"!=typeof process&&void 0!==process.stderr&&"function"==typeof process.stderr.write?t=(...e)=>{try{let t=r(73837);process.stderr.write(t.format(...e)+"\n")}catch(e){t=console.warn??console.log}}:t=console.warn??console.log,t(`${n} ${i}`,...s)},formatters:{}},J=new Proxy(function(e){let t={color:W[V++%W.length],enabled:Y.enabled(e),namespace:e,log:Y.log,extend:()=>{}};return new Proxy((...e)=>{let{enabled:r,namespace:n,color:i,log:s}=t;if(0!==e.length&&F.push([n,...e]),F.length>100&&F.shift(),Y.enabled(n)||r){let t=e.map(e=>"string"==typeof e?e:function(e,t=2){let r=new Set;return JSON.stringify(e,(e,t)=>{if("object"==typeof t&&null!==t){if(r.has(t))return"[Circular *]";r.add(t)}else if("bigint"==typeof t)return t.toString();return t},t)}(e)),r=`+${Date.now()-H}ms`;H=Date.now(),globalThis.DEBUG_COLORS?s(p[i](w(n)),...t,p[i](r)):s(n,...t,r)}},{get:(e,r)=>t[r],set:(e,r,n)=>t[r]=n})},{get:(e,t)=>Y[t],set:(e,t,r)=>Y[t]=r});function z(e=7500){let t=F.map(([e,...t])=>`${e} ${t.map(e=>"string"==typeof e?e:JSON.stringify(e)).join(" ")}`).join("\n");return t.length<e?t:t.slice(-e)}function X(){F.length=0}var K=J},49303:(e,t,r)=>{e.exports=r(30517)},83888:(e,t,r)=>{r.d(t,{B:()=>y});var n=r(11415);function i(e){return{ok:!0,value:e,map:t=>i(t(e)),flatMap:t=>t(e)}}function s(e){return{ok:!1,error:e,map:()=>s(e),flatMap:()=>s(e)}}var a={Int32:0,Int64:1,Float:2,Double:3,Numeric:4,Boolean:5,Text:7,Date:8,Time:9,DateTime:10,Bytes:13,UnknownNumber:128};Error("timeout while waiting for mutex to become available"),Error("mutex already locked");let o=Error("request for lock canceled");class l{constructor(e,t=o){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);return new Promise((r,n)=>{let i={resolve:r,reject:n,weight:e,priority:t},s=u(this._queue,e=>t<=e.priority);-1===s&&e<=this._value?this._dispatchItem(i):this._queue.splice(s+1,0,i)})}runExclusive(e){var t,r,n,i;return t=this,r=arguments,n=void 0,i=function*(e,t=1,r=0){let[n,i]=yield this.acquire(t,r);try{return yield e(n)}finally{i()}},new(n||(n=Promise))(function(e,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof n?r:new n(function(e){e(r)})).then(a,o)}l((i=i.apply(t,r||[])).next())})}waitForUnlock(e=1,t=0){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(r=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),function(e,t){let r=u(e,e=>t.priority<=e.priority);e.splice(r+1,0,t)}(this._weightedWaiters[e-1],{resolve:r,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){let t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(0===this._queue.length)for(let e=this._value;e>0;e--){let t=this._weightedWaiters[e-1];t&&(t.forEach(e=>e.resolve()),this._weightedWaiters[e-1]=[])}else{let e=this._queue[0].priority;for(let t=this._value;t>0;t--){let r=this._weightedWaiters[t-1];if(!r)continue;let n=r.findIndex(t=>t.priority<=e);(-1===n?r:r.splice(0,n)).forEach(e=>e.resolve())}}}_couldLockImmediately(e,t){return(0===this._queue.length||this._queue[0].priority<t)&&e<=this._value}}function u(e,t){for(let r=e.length-1;r>=0;r--)if(t(e[r]))return r;return -1}class c{constructor(e){this._semaphore=new l(1,e)}acquire(){var e,t,r,n;return e=this,t=arguments,r=void 0,n=function*(e=0){let[,t]=yield this._semaphore.acquire(1,e);return t},new(r||(r=Promise))(function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})}runExclusive(e,t=0){return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}var h=(0,n.Debug)("prisma:driver-adapter:libsql:conversion"),f=class extends Error{constructor(e){let t=typeof e;super(`unexpected value of type ${t}: ${"object"===t?JSON.stringify(e):String(e)}`),this.name="UnexpectedTypeError"}},p=(0,n.Debug)("prisma:driver-adapter:libsql"),d=Symbol(),m=class{constructor(e){this.client=e,this.provider="sqlite",this.adapterName="@prisma/adapter-libsql",this[d]=new c}async queryRaw(e){return p("[js::query_raw] %O",e),(await this.performIO(e)).map(({columns:e,rows:t,columnTypes:r})=>{let n=function(e,t){let[r,n]=function(e){let t=new Set;return[e.map((e,r)=>{let n=function(e){switch(e.toUpperCase()){case"":return null;case"DECIMAL":return a.Numeric;case"FLOAT":return a.Float;case"DOUBLE":case"DOUBLE PRECISION":case"NUMERIC":case"REAL":return a.Double;case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"INT":case"INTEGER":case"SERIAL":case"INT2":return a.Int32;case"BIGINT":case"UNSIGNED BIG INT":case"INT8":return a.Int64;case"DATETIME":case"TIMESTAMP":return a.DateTime;case"TIME":return a.Time;case"DATE":return a.Date;case"TEXT":case"CLOB":case"CHARACTER":case"VARCHAR":case"VARYING CHARACTER":case"NCHAR":case"NATIVE CHARACTER":case"NVARCHAR":return a.Text;case"BLOB":return a.Bytes;case"BOOLEAN":return a.Boolean;default:return h("unknown decltype:",e),null}}(e);return null===n&&t.add(r),n}),t]}(e);if(0===n.size)return r;e:for(let e of n){for(let n=0;n<t.length;n++){let i=t[n][e];if(null!==i){r[e]=function(e){switch(typeof e){case"string":return a.Text;case"bigint":return a.Int64;case"boolean":return a.Boolean;case"number":return a.UnknownNumber;case"object":return function(e){if(e instanceof ArrayBuffer)return a.Bytes;throw new f(e)}(e);default:throw new f(e)}}(i);continue e}}r[e]=a.Int32}return r}(r,t);return{columnNames:e,columnTypes:n,rows:t.map(e=>(function(e,t){let r=Array.from(e);for(let e=0;e<r.length;e++){let n=r[e];if(n instanceof ArrayBuffer){r[e]=Array.from(new Uint8Array(n));continue}if("number"==typeof n&&(t[e]===a.Int32||t[e]===a.Int64)&&!Number.isInteger(n)){r[e]=Math.trunc(n);continue}if(["number","bigint"].includes(typeof n)&&t[e]===a.DateTime){r[e]=new Date(Number(n)).toISOString();continue}if("bigint"==typeof n){r[e]=n.toString();continue}}return r})(e,n))}})}async executeRaw(e){return p("[js::execute_raw] %O",e),(await this.performIO(e)).map(({rowsAffected:e})=>e??0)}async performIO(e){let t=await this[d].acquire();try{let t=await this.client.execute(e);return i(t)}catch(t){p("Error in performIO: %O",t);let e=t.rawCode??t.cause?.rawCode;if("number"==typeof e)return s({kind:"Sqlite",extendedCode:e,message:t.message});throw t}finally{t()}}},g=class extends m{constructor(e,t,r){super(e),this.options=t,this.unlockParent=r}async commit(){p("[js::commit]");try{await this.client.commit()}finally{this.unlockParent()}return i(void 0)}async rollback(){p("[js::rollback]");try{await this.client.rollback()}catch(e){p("error in rollback:",e)}finally{this.unlockParent()}return i(void 0)}},y=class extends m{constructor(e){super(e)}async startTransaction(){let e={usePhantomQuery:!0};p("[js::startTransaction] options: %O",e);let t=await this[d].acquire();try{let r=await this.client.transaction("deferred");return i(new g(r,e,t))}catch(e){throw t(),e}}}}};